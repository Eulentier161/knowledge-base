<script>
    document.addEventListener("DOMContentLoaded", () => {
        console.log("theme select");
        const savedTheme = jtd.getTheme();
        if (!savedTheme || savedTheme === "default") {
            const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
            jtd.setTheme(prefersDark ? "dark" : "light");
        } else {
            jtd.setTheme(savedTheme);
        }

        window.matchMedia('(prefers-color-scheme: dark)')
            .addEventListener('change', event => {
                jtd.setTheme(event.matches ? 'dark' : 'light');
            });

        const themeToggle = document.getElementById("theme-toggle");

        jtd.addEvent(themeToggle, "click", () => {
            const newTheme = jtd.getTheme() === "dark" ? "light" : "dark";
            jtd.setTheme(newTheme);
        });
    });
</script>